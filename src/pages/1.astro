---
import Layout from '../layouts/Layout.astro';
import { getApprovedJobs } from '../lib/jobs';

const jobs = getApprovedJobs();
const districtData = [
  { industry: 'Software', tone: 'Innovation Row' },
  { industry: 'Healthcare', tone: 'Care Square' },
  { industry: 'Education', tone: 'Learning Lane' },
  { industry: 'Finance', tone: 'Ledger Heights' },
  { industry: 'Manufacturing', tone: 'Builder District' },
  { industry: 'Government', tone: 'Civic Point' },
];
---

<Layout title="Career City" description="Explore roles by district in Career City.">
  <section class="page-hero">
    <p><strong>/1 Career City</strong></p>
    <h1>Walk through a city of real careers.</h1>
    <p>Each district maps to an industry. Pick an area and jump directly into lived job stories.</p>
    <div class="cta-row">
      <a class="btn btn-primary" href="/jobs">Open full directory</a>
      <a class="btn btn-secondary" href="/share">Contribute your own district story</a>
    </div>
  </section>

  <section class="district-grid">
    {
      districtData.map((district, index) => {
        const match = jobs.find((job) => job.industry === district.industry);
        return (
          <article class="panel district animate-rise" style={`animation-delay:${index * 90}ms`}>
            <p class="district-tag">{district.tone}</p>
            <h2>{district.industry}</h2>
            {match ? (
              <>
                <p>
                  <strong>Featured:</strong> {match.roleTitle}
                </p>
                <p>{match.recommendationToStudents}</p>
                <a class="btn btn-secondary" href={`/jobs/${match.slug}`}>
                  View role snapshot
                </a>
              </>
            ) : (
              <p>District stories arriving soon.</p>
            )}
          </article>
        );
      })
    }
  </section>
</Layout>

<style>
  .district-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 0.9rem;
  }

  .district {
    background:
      linear-gradient(170deg, rgba(15, 76, 129, 0.06), rgba(240, 139, 62, 0.07)), var(--bg-panel);
  }

  .district-tag {
    display: inline-flex;
    padding: 0.25rem 0.6rem;
    border-radius: 999px;
    background: rgba(15, 76, 129, 0.12);
    font-size: 0.78rem;
    font-weight: 700;
    margin: 0 0 0.7rem;
  }

  .district h2 {
    margin: 0 0 0.5rem;
  }

  .district p {
    margin: 0 0 0.75rem;
    color: var(--ink-soft);
  }
</style>
